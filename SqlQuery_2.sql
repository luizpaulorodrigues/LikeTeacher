IF object_id(N'[dbo].[FK_dbo.tb_professores_dbo.tb_enderecos_EnderecoId]', N'F') IS NOT NULL
    ALTER TABLE [dbo].[tb_professores] DROP CONSTRAINT [FK_dbo.tb_professores_dbo.tb_enderecos_EnderecoId]
IF object_id(N'[dbo].[FK_dbo.tb_cadeiras_dbo.tb_cursos_CursoId]', N'F') IS NOT NULL
    ALTER TABLE [dbo].[tb_cadeiras] DROP CONSTRAINT [FK_dbo.tb_cadeiras_dbo.tb_cursos_CursoId]
IF EXISTS (SELECT name FROM sys.indexes WHERE name = N'IX_CursoId' AND object_id = object_id(N'[dbo].[tb_cadeiras]', N'U'))
    DROP INDEX [IX_CursoId] ON [dbo].[tb_cadeiras]
IF EXISTS (SELECT name FROM sys.indexes WHERE name = N'IX_CadeiraId' AND object_id = object_id(N'[dbo].[tb_professores]', N'U'))
    DROP INDEX [IX_CadeiraId] ON [dbo].[tb_professores]
IF EXISTS (SELECT name FROM sys.indexes WHERE name = N'IX_EnderecoId' AND object_id = object_id(N'[dbo].[tb_professores]', N'U'))
    DROP INDEX [IX_EnderecoId] ON [dbo].[tb_professores]
EXECUTE sp_rename @objname = N'dbo.tb_cadeiras.CadeiraId', @newname = N'ProfessorId', @objtype = N'COLUMN'
ALTER TABLE [dbo].[tb_cadeiras] ADD [Curso_CursoId] [uniqueidentifier]
ALTER TABLE [dbo].[tb_cursos] ADD [CadeiraId] [uniqueidentifier] NOT NULL DEFAULT '00000000-0000-0000-0000-000000000000'
ALTER TABLE [dbo].[tb_enderecos] ADD [ProfessorId] [uniqueidentifier] NOT NULL DEFAULT '00000000-0000-0000-0000-000000000000'
CREATE INDEX [IX_ProfessorId] ON [dbo].[tb_cadeiras]([ProfessorId])
CREATE INDEX [IX_Curso_CursoId] ON [dbo].[tb_cadeiras]([Curso_CursoId])
CREATE INDEX [IX_CadeiraId] ON [dbo].[tb_cursos]([CadeiraId])
CREATE INDEX [IX_ProfessorId] ON [dbo].[tb_enderecos]([ProfessorId])
ALTER TABLE [dbo].[tb_cursos] ADD CONSTRAINT [FK_dbo.tb_cursos_dbo.tb_cadeiras_CadeiraId] FOREIGN KEY ([CadeiraId]) REFERENCES [dbo].[tb_cadeiras] ([CadeiraId])
ALTER TABLE [dbo].[tb_enderecos] ADD CONSTRAINT [FK_dbo.tb_enderecos_dbo.tb_professores_ProfessorId] FOREIGN KEY ([ProfessorId]) REFERENCES [dbo].[tb_professores] ([ProfessorID])
ALTER TABLE [dbo].[tb_cadeiras] ADD CONSTRAINT [FK_dbo.tb_cadeiras_dbo.tb_cursos_Curso_CursoId] FOREIGN KEY ([Curso_CursoId]) REFERENCES [dbo].[tb_cursos] ([CursoId])
DECLARE @var0 nvarchar(128)
SELECT @var0 = name
FROM sys.default_constraints
WHERE parent_object_id = object_id(N'dbo.tb_professores')
AND col_name(parent_object_id, parent_column_id) = 'CadeiraId';
IF @var0 IS NOT NULL
    EXECUTE('ALTER TABLE [dbo].[tb_professores] DROP CONSTRAINT [' + @var0 + ']')
ALTER TABLE [dbo].[tb_professores] DROP COLUMN [CadeiraId]
DECLARE @var1 nvarchar(128)
SELECT @var1 = name
FROM sys.default_constraints
WHERE parent_object_id = object_id(N'dbo.tb_professores')
AND col_name(parent_object_id, parent_column_id) = 'EnderecoId';
IF @var1 IS NOT NULL
    EXECUTE('ALTER TABLE [dbo].[tb_professores] DROP CONSTRAINT [' + @var1 + ']')
ALTER TABLE [dbo].[tb_professores] DROP COLUMN [EnderecoId]
INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
VALUES (N'201802062003341_AutomaticMigration', N'LP.LikeTeacher.Infra.Data.Migrations.Configuration',  0x1F8B0800000000000400DD5CDB6EE336107D2FD07F10F458A4569245816E60B7D8759285D1DC10278BBE058C443B4475AB4405098A7E591FFA49FD850E75A1285194A84B62B7E8CB9A140F87C399E10C79D27FFEFA7BFEF38BE71ACF388A49E02FCCA3D9A16960DF0E1CE26F17664237DFFF68FEFCD3B7DFCCCF1CEFC5F85A7CF7817D0723FD78613E511A9E58566C3F610FC5338FD85110071B3AB303CF424E601D1F1E7EB48E8E2C0C10266019C6FC36F129F170FA037E2E03DFC6214D907B1938D88DF376E859A7A8C615F2701C221B2FCC8B9BD905F90DDF61045DD16CE56F22343B4514CD0085E2176A1A9F5C8240B0357637A6817C3FA08882D827F7315ED328F0B7EB101A907BF71A62F86E83DC18E7CB39293FD75DD9E1315B99550E2CA0EC24A681D713F0E843AE2AAB3E7C90C24DAE4A50E619289DBEB255A70A5D984BE4601221D3A8CF75B27423F69DA4EE53F88AF8B31489E07896231C188DDF1D708B01C362FF1D18CBC4A54984173E4E6884DC03E326797489FD0B7EBD0B7EC3FEC24F5C57141AC486BE4A0334DD44418823FA7A8B37D5A5AC1CD3B0AAC3ADFA783E5A1E9AADF94B42E0DF5720097A74313710AB15E52AF07001005606FE631A97E8E502FB5BFA049E75081E734E5EB053B4E4A8F73E01778341344A70EF59974914072325879F1B1CC741D417E70A3D936D6A2F4D5299C62D76D3DEF88984993B16F6F2907F711E05DE6DE0969B90753CAC8324B2993A83A6DE3B146D31ED294EDC2C4F0AC8FD409047ECE03372792ABD85B4BAF27085B7AA48F84A5613EF54AAAAFCA2495D73AB0C06ED2122DBA8E101828DDF83F050F849EFE0308183ED28340C0B6B6A2F2A9C64B81B49B6DAE86483EC54F096C1B6CA31766FAF654C3EED6FB395C123EC767973DE66B64735ABCDAC749CD1DE7E6999F1E31B4CB81BDF5C3960F3C5B42B9F7E38EE0D710616E9BEBFE477D8C59BC06FD5D90F6F31F1274A9E8362D6CF01C40FE4F7066175C2158A6DA83D7CCAD1A015DF11AFBF4C0C0EA2178AA1AAE80FD6156915194BBFF440CA5C940984AE7467BE83236C2B12AAA2B7593EB95712B0E1932609B50F86026FC4B95040ECFE5828241992C98863C71C0A6737E302D745B08DA04A4D4A9779BFE8759578B89C7798FC9F11897621FB928887C6FBCD7B1653D8AE09E6ED585EE0852EAEC4E586B98E27996BFA8AB7BDA4EB1D14EB89724BDCD4098A9F60844D52A9C4B28627ECD545C264466BF69E6D0ECFFB618320DC9110021CCCBD30BF93D4A642E4B15F402C6A882AE6918409411154E2B37BBC25281BC22CF1A91C41896F9310B96DD3D706F5BB5E624AE7B3D47B4E718861E77CDAA6CFD1D3F3596A07429786E69660171DE652B9B6516E6EF31D4EE7E6B61A4CE3CD4F97091ECE664775D7D05E6C83B7AAA46B73DD52C43205D15F775BA654220BF1E44DFC452D858ED5B614B1BDDC46ADE57E52ECDA7BBAEDA9E57A6F122FDAA9312985784F5B526A781F4D293BCDD9BB168CC05191409715087FF2926A9BFB18E7E54D9CE74475DB60D06B4CA59AB34C21EAF62699570D22BF669701B210DD319C2B17376108C6D98123D4A7124A19896B20C206D41654DE6A0ADF345E7BD6EDA12B8FE28297AA936CAA2B731231F80ED62BC3EAE274165E7DA56958B83A1FD0C8083484D6C8013AD53760E14D89BABCFAAE04413745105620186D8B225A920201ABE24893D942AB463A4E38CD336EA85DBC81368A4A8AC7DE929260659C8482BB6029C80BF34B148650BE0A6486BCC558674C86E5F7EBFE6FFA5E8661D971C3D33E9796CF4483086D71AD9715DB0E3E27514CD90DE6236295EED2F1A4CF1A4E1A45EC2D26AC1D26F2DE1501B918C0FE9D1F6B5DC48E9922D0969A3D87C5B21B8474DD58362779644A31412E8AD48F67CBC04D3CBFB30E5363654F0C224CD6A28FC01F212BB2343F69B6E154F21711AB35B161465E53B094FA481B5B73B4BAA1E8995116D62736A2A6234BC7849AC7BDF5964D603C034C79471B2EC6EA69775D793069EC7CCBD86E473B55395A4319D3B287EC25B6B27BAC417F3C7B561587B3DFEF6983F97BA7089137E963E40F9E2246DEA48F51BE5E8A3065AB3E52FE1C29C2E44DFA18F5D748118CF53D889DFD60CB574909B4ECDA1BBF2FB3DF69BD9E977BFD9D5E3D54699FC2FB5AC548956F766D68E9335BC5E35983FE78F1954D8411DB7B4480FCDDAC1203F2367D94E2E54C4429DA7A6886C8C1A468EB114DF257ADCA4EE56D3D64111FAD2A02891DFFFD04AD5A273526FBC565C18084BE18AA99B5B30AB039C7A9DE10C85AEA99A93D28F335A62F2E435FF194178E13A56FADC281EA1D92DE4DAF62F6DAC95F3AB5575FAF9A6583918AE7FA27DC5C79115D2B96E779E1DAFDE70052259B7D621AA08067E2B02A76FD1A53EC6596B7FEDD5DBA041CA4FCE012F9047C8B66CC0CF6C2FC63ED4F08F687CE6FC5B1E33614FE5A9CFE151C442F0BF30FE3CF5D13EC139FFC9E60C2AECAC986E068146BEF1945F6138A644AC2382AFD68191B480632A67A9318C889B1FAF541C03930AE23B0D813E310F670D0FA1E3A57A9215105492593CCC318CD391F69C01351C0F7D378BB5D4C67630B941E863609437BDCCE4E4D961EBDC302719A6FB07ACDABF83E9DF0C4B8039F610AAFB1AC0773A8C74EFE712F6CBB429626ECE81E43959E4AAA3A11BA11F7877134E747D27FB1D2C54106E5208AE9508EB37067D00B6D0A92EEB8D0302D61767C6028C9B3430C59A6CE4E65CD5562EC10D9AAB4D8C9CEB50AE9752AD42AA55503752081B509F9B83FF26E33C9C949A545813284F559E3430C21A38EE12EBD3757F4FF440ED5DB2F99B939D478A6DA79FD7D50DF16F5A5A7E9CFD77647F50E7BDF832B2BE4FFC34887320F6620CB76901DB4BD20BE3DF5752FE9896398AE135AC3FBC784DDD8429FD8B01F4C559966A4780EACDF5DAA39A8D9F52E54208FCCFBF31CEAF1C156911F1B49AA6A8EAA0ABE9960A8A4B0B613581593842D4C3515C9B595E3AA9807ABB8866FCD82ADEE6EE589A793F92AF33DF78AE7AA27E25075EC079355B2EE1A3B4687B9DA487ADD4796EA98C54EB3B33D28A8F26B198472E17FB10547494CB625047B05F4B15D09E2FC9B95BF098A03A52651F149AD3EBDC4504E4384FF1441318A6C0ADD366829FDDBCDAFC84DD22BB847ECACFCEB848609852563EFD17D1595C1CEA4B6F9539E6D55E6F97598FE9DE5144B003109BBD4BAF63F27C475B8DCE70DF5B002821D765F30B4677B096727C5DB578E7425118C5440B9FAF8197D87BDD005B0F8DA5FA3673C44B6FB185FE02DB25F8B474F3548F74654D53E3F25681B212FCE31CAF1F0136CD8F15E7EFA17A8AB35FD694E0000 , N'6.2.0-61023')

